#!/bin/bash
# vim:ft=sh

BLUE="\[\033[01;34m\]"
WHITE="\[\033[01;00m\]"
MAGENTA="\[\033[01;35m\]"
PINK="\[\033[01;31m\]"
GREEN="\[\033[01;32m\]"

GIT_PS1_SHOWDIRTYSTATE=1
GIT_PS1_SHOWSTASHSTATE=1
GIT_PS1_SHOWUNTRACKEDFILES=1

get_ps1() {
    user="$BLUE\u$WHITE"
    host="$GREEN\h$WHITE"
    dir="$GREEN\w$WHITE"
    time="$GREEN\$(date \"+%H:%M:%S\")$WHITE"
    git="$PINK\$(__git_ps1)$WHITE"

    echo "${user}@${host} ${dir} ${git}\n${time}: "
}

PS1="$(get_ps1)"

# I love history
export HISTSIZE=""
export HISTFILESIZE=""
# Allows for sharing of history across tmux session (-a appends to history)
export PROMPT_COMMAND='history -a'
# Ignore and erase duplicates and commands with leading whitespace
export HISTCONTROL=ignoreboth:erasedups

export EDITOR=vim

# ipython needs these two
export PAGER=less
export less=-r

# Platform dependant stuff
if [[ "$(uname)" == 'Linux' ]]; then
    . ~/.bash_linux
elif [[ "$(uname)" == 'Darwin' ]]; then
    . ~/.bash_mac
fi

export PYTHONDONTWRITEBYTECODE=1
if [[ -d "$HOME/.venvs/default" ]]; then
    export PATH="$HOME/.venvs/default/bin:$PATH"
    export PYTHONPATH="$HOME/~/.venvs/default/lib/python3.6/site-packages"
fi

export PATH="$HOME/bin:$HOME/go/bin:$PATH"

[[ -f ~/.bash_secret ]] && . ~/.bash_secret
[[ -f ~/.aliases ]] && . ~/.aliases
[[ -f ~/.distraction ]] && . ~/.distraction

command kubectl > /dev/null && source <(kubectl completion bash)

if [ -f '/home/philipforget/workspace/google-cloud-sdk/path.bash.inc' ]; then source '/home/philipforget/workspace/google-cloud-sdk/path.bash.inc'; fi
if [ -f '/usr/lib/google-cloud-sdk/completion.bash.inc' ]; then source '/usr/lib/google-cloud-sdk/completion.bash.inc'; fi

[[ -f ~/.fzf.bash ]] && source ~/.fzf.bash
